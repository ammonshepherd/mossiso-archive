{"id":244,"date":"2009-07-20T13:54:27","date_gmt":"2009-07-20T19:54:27","guid":{"rendered":"http:\/\/historicalwebber.mossiso.com\/?p=244"},"modified":"2014-09-22T14:20:54","modified_gmt":"2014-09-22T18:20:54","slug":"convert-wp-to-static-html-part-2","status":"publish","type":"post","link":"https:\/\/mossiso.com\/2009\/07\/20\/convert-wp-to-static-html-part-2\/","title":{"rendered":"Convert WP to static HTML &#8211; part 2"},"content":{"rendered":"<p>This is a followup to <a title=\"Converting WordPress to static html\" href=\"http:\/\/mossiso.com\/2007\/09\/10\/converting-wordpress-to-static-html.html\">this previous post<\/a>.<\/p>\n<p>So I&#8217;ve been converting some more blogs to static html files, and this time around things seemed to be so different, that I made up a new how to. Here are the steps that I&#8217;ve been using to convert blogs using the default Kubric theme.<\/p>\n<ol>\n<li>Update the permalink structure for the site so that it uses the year, month, day, postname structure.\n<pre class=\"lang:mysql decode:true \" >UPDATE `database`.`prefix_options` SET `option_value` = \u2018\/%year%\/%monthnum%\/%day%\/%postname%\/\u2019 WHERE `prefix_options`.`option_name` = \u2018permalink_structure\u2019 LIMIT 1 ;<\/pre>\n<\/li>\n<li>Make sure the blog does not block search engines. If the blog is set to block them, wget can only download the index.html file. And this took me a while to figure out. So, for the sake of search engines, if wget only downloads the index.html file or wget recursive gets only index.html file, then remember to check your robots.txt or similar settings.  Either edit in the admin section (under Settings-&gt;Privacy) or via SQL.\n<pre class=\"lang:sh decode:true \" >UPDATE `database`.`prefix_options` SET `option_value` = '1' WHERE `prefix_options`.`option_name` = 'blog_public' LIMIT 1 ;<\/pre>\n<\/li>\n<li>Add the .htaccess file if not already there, where\n<pre>\/path\/to\/wordpress\/blog\/<\/pre>\n<p>starts at the URL root, not the absolute file path. So http:\/\/sitename.com\/path\/to\/wordpress\/blog\/ would have the .htaccess file below in the &#8216;blog&#8217; directory.<\/p>\n<pre class=\"lang:apache decode:true \" >RewriteEngine On\r\nRewriteBase \/path\/to\/wordpress\/blog\/\r\nRewriteCond %{REQUEST_FILENAME} !-f\r\nRewriteCond %{REQUEST_FILENAME} !-d\r\nRewriteRule . \/path\/to\/wordpress\/blog\/index.php [L]<\/pre>\n<\/li>\n<li>Get rid of the meta links through the sidebar widget in the admin, or delete the appropriate lines from the theme files (for default Kubric theme edit comments.php, sidebar.php, single.php, footer.php), or see the last step. Delete the code that puts in the search, comments, trackback, rss, and anything in the footer you want out.<\/li>\n<li>When all is good, run wget to grab the files.\n<pre class=\"lang:sh decode:true \" >wget --mirror -P blog-static -nH -np -p -k -E --cut-dirs=5 http:\/\/sitename.com\/blog\/<\/pre>\n<\/li>\n<li>Rename the blog directory. <code>mv blog blog-old<\/code><\/li>\n<li>Rename the static directory to be live. <code>mv blog-static blog<\/code><\/li>\n<li>Copy the images directory from the old theme to the appropriate static directory.\n<pre class=\"lang:sh decode:true \" >cp -r blog-old\/wordpress\/wp-content\/themes\/default\/images\/ blog\/wordpress\/wp-content\/themes\/default\/<\/pre>\n<\/li>\n<li>Alternative to get rid of unwanted links, etc. Use the find command to find all html files, then use perl to delete the lines. Don&#8217;t forget to escape forward slashes in the search field. Unfortunately, this method requires you to do it for every line of code you want to delete. It&#8217;s much better to delete the lines out of the theme files. The code below has an unnecessary space in the opening H3 tag so it will render properly.\n<pre class=\"lang:sh decode:true \" >find . -name \\*.html | xargs perl -ni -e 'print unless \/&amp;lt; h3&amp;gt;Leave a Reply&amp;lt; \\\/h3&amp;gt;\/'<\/pre>\n<p>Also, if you want to just search and replace instead of remove, this handy find and perl one-liner will find and replace text in all html files.<\/p>\n<pre class=\"lang:sh decode:true \" >find . -name *.html | xargs perl -p -i'' -e \"s\/search text here\/replace text there\/\"<\/pre>\n<p>The above would search for all the &#8220;search text here&#8221; phrases in all html files, and replace it with &#8220;replace text here&#8221;. You can obviously substitute whatever you want in those to places. If you have a &#8216;\/&#8217; (forward slash) character, it will need to be escaped with a &#8216;\\&#8217; (back slash) character. Perl uses the regular regular expression syntax, so look that up if you need help formulating a search and replace structure.<\/li>\n<\/ol>\n","protected":false},"excerpt":{"rendered":"<p>This is a followup to this previous post. So I&#8217;ve been converting some more blogs to static html files, and this time around things seemed to be so different, that I made up a new how to. Here are the steps that I&#8217;ve been using to convert blogs using the default Kubric theme. Update the &hellip; <a href=\"https:\/\/mossiso.com\/2009\/07\/20\/convert-wp-to-static-html-part-2\/\" class=\"more-link\">Continue reading <span class=\"screen-reader-text\">Convert WP to static HTML &#8211; part 2<\/span><\/a><\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"closed","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":{"jetpack_post_was_ever_published":false,"_jetpack_newsletter_access":"","_jetpack_dont_email_post_to_subs":false,"_jetpack_newsletter_tier_id":0,"footnotes":"","jetpack_publicize_message":"","jetpack_publicize_feature_enabled":true,"jetpack_social_post_already_shared":false,"jetpack_social_options":{"image_generator_settings":{"template":"highway","enabled":false}}},"categories":[3,10],"tags":[24,41,67,76,82,278],"class_list":["post-244","post","type-post","status-publish","format-standard","hentry","category-coding","category-wordpress","tag-blog","tag-find","tag-perl","tag-static-html","tag-wget","tag-wordpress"],"jetpack_publicize_connections":[],"jetpack_featured_media_url":"","jetpack_sharing_enabled":true,"jetpack_shortlink":"https:\/\/wp.me\/p9wosP-3W","_links":{"self":[{"href":"https:\/\/mossiso.com\/wp-json\/wp\/v2\/posts\/244"}],"collection":[{"href":"https:\/\/mossiso.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/mossiso.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/mossiso.com\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/mossiso.com\/wp-json\/wp\/v2\/comments?post=244"}],"version-history":[{"count":7,"href":"https:\/\/mossiso.com\/wp-json\/wp\/v2\/posts\/244\/revisions"}],"predecessor-version":[{"id":1648,"href":"https:\/\/mossiso.com\/wp-json\/wp\/v2\/posts\/244\/revisions\/1648"}],"wp:attachment":[{"href":"https:\/\/mossiso.com\/wp-json\/wp\/v2\/media?parent=244"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/mossiso.com\/wp-json\/wp\/v2\/categories?post=244"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/mossiso.com\/wp-json\/wp\/v2\/tags?post=244"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}